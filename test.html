<!-- Save this as bucket.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Bucket List</title>
  <style>
    /* [Keep ALL your original styles â€” trimmed here for brevity] */
    /* Insert your original styles here from your bucket.html â€” no deletions */

    /* Add new styles for date/image controls */
    .meta-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
    }

    .meta-controls input[type="date"],
    .meta-controls input[type="file"] {
      font-size: 14px;
    }

    .completed-image {
      display: block;
      margin-top: 10px;
      max-width: 100%;
      border-radius: 10px;
      border: 1px solid #654321;
    }

    .bucket-item.expanded {
      padding-bottom: 20px;
    }

    .bucket-item .meta-controls label {
      font-size: 14px;
      color: #654321;
    }
  </style>
</head>
<body>
  <!-- Your original layout â€” preserved -->
  <div class="initial-view" id="initialView">
    <div class="bucket-container" id="bucketContainer">
      <div class="click-prompt" id="clickPrompt">Click the bucket to unfurl your scroll!</div>
      <div class="bucket">ðŸª£</div>
    </div>
  </div>

  <div class="list-view" id="listView">
    <div class="upside-down-bucket">ðŸª£</div>
    <div class="parchment-scroll">
      <div class="parchment-texture"></div>
      <div class="scroll-content">
        <h1>My Bucket List</h1>
        <form class="add-item-form" id="addItemForm">
          <input 
            type="text" 
            class="add-item-input" 
            id="itemInput" 
            placeholder="What quest shall you undertake?"
            maxlength="100"
            required
          />
          <button type="submit" class="add-btn">Add Quest</button>
        </form>

        <ul class="bucket-list" id="bucketList"></ul>

        <div class="stats" id="stats">
          <div><strong>Total Quests:</strong> <span id="totalItems">0</span></div>
          <div><strong>Completed:</strong> <span id="completedItems">0</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Script section -->
  <script>
    let bucketItems = [];
    let nextId = 1;

    const initialView = document.getElementById('initialView');
    const listView = document.getElementById('listView');
    const bucketContainer = document.getElementById('bucketContainer');
    const addItemForm = document.getElementById('addItemForm');
    const itemInput = document.getElementById('itemInput');
    const bucketList = document.getElementById('bucketList');
    const totalItemsSpan = document.getElementById('totalItems');
    const completedItemsSpan = document.getElementById('completedItems');

    bucketContainer.addEventListener('click', function () {
      initialView.style.transform = 'translateY(-100vh) rotate(-10deg)';
      initialView.style.opacity = '0';
      setTimeout(() => {
        initialView.style.display = 'none';
        listView.classList.add('active');
        setTimeout(() => itemInput.focus(), 2000);
      }, 800);
    });

    addItemForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const text = itemInput.value.trim();
      if (text) {
        addItem(text);
        itemInput.value = '';
      }
    });

    function addItem(text) {
      const item = {
        id: nextId++,
        text: text,
        completed: false,
        date: '',
        image: ''
      };
      bucketItems.push(item);
      renderList();
      updateStats();
    }

    function toggleItem(id) {
      const item = bucketItems.find(item => item.id === id);
      if (item) {
        item.completed = !item.completed;
        renderList();
        updateStats();
      }
    }

    function deleteItem(id) {
      bucketItems = bucketItems.filter(item => item.id !== id);
      renderList();
      updateStats();
    }

    function updateDate(id, value) {
      const item = bucketItems.find(i => i.id === id);
      if (item) {
        item.date = value;
        renderList();
      }
    }

    function handleImageUpload(event, id) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const item = bucketItems.find(i => i.id === id);
          if (item) {
            item.image = e.target.result;
            renderList();
          }
        };
        reader.readAsDataURL(file);
      }
    }

    function renderList() {
      bucketList.innerHTML = '';
      bucketItems.forEach(item => {
        const li = document.createElement('li');
        li.className = `bucket-item ${item.completed ? 'completed' : ''}`;
        if (item.image) li.classList.add('expanded');

        const checkbox = `<input type="checkbox" ${item.completed ? 'checked' : ''} onchange="toggleItem(${item.id})">`;
        const text = `<span class="item-text">${item.text}</span>`;
        const deleteBtn = `<button class="delete-btn" onclick="deleteItem(${item.id})">Remove</button>`;

        let meta = '';
        if (item.completed) {
          meta = `
            <div class="meta-controls">
              <label>Date:
                <input type="date" value="${item.date}" onchange="updateDate(${item.id}, this.value)">
              </label>
              <label>
                <input type="file" accept="image/*" onchange="handleImageUpload(event, ${item.id})">
              </label>
            </div>
          `;
          if (item.image) {
            meta += `<img src="${item.image}" class="completed-image" alt="Completed quest image">`;
          }
        }

        li.innerHTML = `${checkbox}${text}${meta}${deleteBtn}`;
        bucketList.appendChild(li);
      });
    }

    function updateStats() {
      totalItemsSpan.textContent = bucketItems.length;
      completedItemsSpan.textContent = bucketItems.filter(item => item.completed).length;
    }

    window.toggleItem = toggleItem;
    window.deleteItem = deleteItem;
    window.updateDate = updateDate;
    window.handleImageUpload = handleImageUpload;
  </script>
</body>
</html>
